#!/bin/bash
# WARNING: Do not edit this file directly - it is built from the src directory

gnome_color () {
    AA=${1:1:2}
    BB=${1:3:2}
    CC=${1:5:2}

    echo "#${AA}${AA}${BB}${BB}${CC}${CC}"
}

COLOR_01='rgb(60, 76, 85)'              # HOST
COLOR_02='rgb(223, 140, 140)'           # SYNTAX_STRING
COLOR_03='rgb(168, 206, 147)'           # COMMAND
COLOR_04='rgb(218, 218, 147)'           # COMMAND_COLOR2
COLOR_05='rgb(131, 175, 229)'           # PATH
COLOR_06='rgb(154, 147, 225)'           # SYNTAX_VAR
COLOR_07='rgb(127, 193, 202)'           # PROMPT
COLOR_08='rgb(197, 212, 221)'           #

COLOR_09='rgb(137, 155, 166)'           #
COLOR_10='rgb(242, 195, 143)'           # COMMAND_ERROR
COLOR_11='rgb(168, 206, 147)'           # EXEC
COLOR_12='rgb(218, 218, 147)'           #
COLOR_13='rgb(131, 175, 229)'           # FOLDER
COLOR_14='rgb(209, 142, 194)'           #
COLOR_15='rgb(127, 193, 202)'           #
COLOR_16='rgb(230, 238, 243)'           #

BACKGROUND_COLOR=$(gnome_color '#3C4C55')
FOREGROUND_COLOR=$(gnome_color '#C5D4DD')   # Text
CURSOR_COLOR=$(gnome_color '#7FC1CA') # Cursor

gnomeVersion="$(expr "$(gnome-terminal --version)" : '.* \(.*[.].*[.].*\)$')"
dircolors_checked=false

profiles_path=/org/gnome/terminal/legacy/profiles:

set_theme() {
  profile=$(get_uuid $1)
  profile_path=$profiles_path/$profile

  dconf write $profile_path/palette "['${COLOR_01}', '${COLOR_02}', '${COLOR_03}', '${COLOR_04}', '${COLOR_05}', '${COLOR_06}', '${COLOR_07}', '${COLOR_08}', '${COLOR_09}', '${COLOR_10}', '${COLOR_11}', '${COLOR_12}', '${COLOR_13}', '${COLOR_14}', '${COLOR_15}', '${COLOR_16}']"

  # set foreground, background and highlight color
  # dconf write $profile_path/bold-color "'$SOME_COLOR'"
  dconf write $profile_path/background-color "'$BACKGROUND_COLOR'"
  dconf write $profile_path/foreground-color "'$FOREGROUND_COLOR'"

  # make sure the profile is set to not use theme colors
  dconf write $profile_path/use-theme-colors "false"

  # set highlighted color to be different from foreground color
  dconf write $profile_path/bold-color-same-as-fg "true"
}


get_uuid() {
  profiles=($(dconf list $profiles_path/ | grep ^: | sed 's/\///g'))
  # Print the UUID linked to the profile name sent in parameter
  local profile_name=$1
  for i in ${!profiles[*]}
    do
      if [[ "$(dconf read $profiles_path/${profiles[i]}/visible-name)" == \
          "'$profile_name'" ]]
        then echo "${profiles[i]}"
        return 0
      fi
    done
  echo "$profile_name"
}

set_theme $1

